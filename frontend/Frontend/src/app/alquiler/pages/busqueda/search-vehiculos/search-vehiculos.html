<div class="container mx-auto px-4">
    <!-- Barra de b√∫squeda espec√≠fica para veh√≠culos -->
    <div class="mb-6">
        <app-search-input 
            (value)="onSearchChange($event)"
            [placeholder]="'Buscar por placa, marca, modelo, cliente o categor√≠a...'"/>
        
        <!-- Debug info -->
        <div class="mt-2 text-xs text-gray-600 bg-slate-100 p-2 rounded">
            <strong>Debug:</strong> Query actual: "{{ searchQuery() }}" | 
            Total veh√≠culos: {{ allVehiculos().length }} | 
            Filtrados: {{ filteredVehiculos().length }}
        </div>
    </div>

    <!-- Estado de carga con skeleton -->
    @if(isLoading()) {
        <div class="overflow-x-auto">
            <table class="table w-full">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Placa</th>
                        <th>Marca/Modelo</th>
                        <th>Cliente</th>
                        <th>Categor√≠a</th>
                        <th>Tarifa</th>
                        <th>Precio/Hora</th>
                        <th>Precio/D√≠a</th>
                        <th>Contacto</th>
                    </tr>
                </thead>
                <tbody>
                    @for (item of [1,2,3,4,5]; track item) {
                        <tr>
                            <td><div class="skeleton h-4 w-8"></div></td>
                            <td><div class="skeleton h-4 w-20"></div></td>
                            <td>
                                <div class="skeleton h-4 w-24 mb-2"></div>
                                <div class="skeleton h-3 w-20"></div>
                            </td>
                            <td>
                                <div class="skeleton h-4 w-32 mb-2"></div>
                                <div class="skeleton h-3 w-40"></div>
                            </td>
                            <td>
                                <div class="skeleton h-6 w-20 mb-1"></div>
                                <div class="skeleton h-3 w-28"></div>
                            </td>
                            <td><div class="skeleton h-4 w-24"></div></td>
                            <td><div class="skeleton h-4 w-16"></div></td>
                            <td><div class="skeleton h-4 w-16"></div></td>
                            <td><div class="skeleton h-4 w-28"></div></td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }

    <!-- Sin resultados -->
    @else if(filteredVehiculos().length === 0) {
        <div class="alert alert-warning bg-yellow-50 border border-yellow-200">
            <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6 text-yellow-700" fill="none" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
            </svg>
            <span class="text-gray-800 font-medium">No se encontraron veh√≠culos que coincidan con tu b√∫squeda "{{ searchQuery() }}".</span>
        </div>
    }

    <!-- Tabla de veh√≠culos -->
    @else {
        <div class="overflow-x-auto bg-white rounded-lg shadow">
            <table class="table w-full">
                <thead class="bg-slate-100">
                    <tr class="text-gray-800">
                        <th class="font-bold text-gray-800">#</th>
                        <th class="font-bold text-gray-800">Placa</th>
                        <th class="font-bold text-gray-800">Marca/Modelo</th>
                        <th class="font-bold text-gray-800">Cliente</th>
                        <th class="font-bold text-gray-800">Categor√≠a</th>
                        <th class="font-bold text-gray-800">Tarifa</th>
                        <th class="font-bold text-gray-800">Precio/Hora</th>
                        <th class="font-bold text-gray-800">Precio/D√≠a</th>
                        <th class="font-bold text-gray-800">Contacto</th>
                    </tr>
                </thead>
                <tbody class="bg-white">
                    @for (vehiculo of filteredVehiculos(); track vehiculo.id; let index = $index) {
                        <tr class="hover:bg-slate-50 bg-white border-b border-slate-100">
                            <td class="text-gray-800 font-medium">{{ index + 1 }}</td>
                            <td>
                                <div class="font-bold text-blue-700 text-lg">{{ vehiculo.placa }}</div>
                            </td>
                            <td>
                                <div class="text-gray-800 font-semibold">{{ vehiculo.marca }}</div>
                                <div class="text-sm text-gray-600">{{ vehiculo.modelo }}</div>
                            </td>
                            <td>
                                <div class="flex items-center space-x-3">
                                    <div>
                                        <div class="font-bold text-gray-800">{{ vehiculo.cliente.nombre }}</div>
                                        <div class="text-sm text-gray-600">{{ vehiculo.cliente.email }}</div>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <span class="badge bg-slate-800 text-white badge-sm font-semibold border-0">
                                    {{ vehiculo.tipoVehiculo.categoria }}
                                </span>
                                <div class="text-xs text-gray-600 mt-1">
                                    {{ vehiculo.tipoVehiculo.descripcion }}
                                </div>
                            </td>
                            <td class="text-gray-800 font-medium">{{ vehiculo.tipoVehiculo.tipotarifa.tipoTarifa }}</td>
                            <td>
                                <span class="text-green-700 font-bold text-base">
                                    ${{ vehiculo.tipoVehiculo.tipotarifa.precioHora }}
                                </span>
                            </td>
                            <td>
                                <span class="text-blue-700 font-bold text-base">
                                    ${{ vehiculo.tipoVehiculo.tipotarifa.precioDia }}
                                </span>
                            </td>
                            <td>
                                <div class="text-sm text-gray-800 font-medium">
                                    <div>üìû {{ vehiculo.cliente.telefono }}</div>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <!-- Contador de resultados -->
        <div class="mt-4 text-base text-gray-700 font-medium text-center">
            @if (searchQuery()) {
                Mostrando {{ filteredVehiculos().length }} resultado(s) de {{ allVehiculos().length }} veh√≠culos para "{{ searchQuery() }}"
            } @else {
                Mostrando {{ filteredVehiculos().length }} veh√≠culos en total
            }
        </div>
    }
</div>
