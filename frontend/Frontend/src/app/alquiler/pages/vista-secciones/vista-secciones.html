<section class="container mx-auto px-8 py-12">
  <!-- Header -->
  <div class="flex justify-between items-center mb-8">
    <h1 class="text-4xl font-bold text-slate-800">Gestión de Secciones y Espacios</h1>
    <button 
      class="btn bg-blue-600 hover:bg-blue-700 text-white font-semibold"
      (click)="openCreateSeccionModal()">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="mr-2">
        <path fill="currentColor" d="M11 13H5v-2h6V5h2v6h6v2h-6v6h-2z"/>
      </svg>
      Nueva Sección
    </button>
  </div>

  <!-- Loading State -->
  @if (isLoading()) {
    <div class="flex justify-center items-center py-20">
      <span class="loading loading-spinner loading-lg text-blue-600"></span>
    </div>
  }

  <!-- Error State -->
  @if (error()) {
    <div class="alert alert-error">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
        <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
      </svg>
      <span>{{ error() }}</span>
    </div>
  }

  <!-- Empty State -->
  @if (!isLoading() && secciones().length === 0) {
    <div class="text-center py-20">
      <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" class="mx-auto mb-4 text-gray-400">
        <path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
      </svg>
      <h3 class="text-2xl font-bold text-gray-700 mb-2">No hay secciones creadas</h3>
      <p class="text-gray-500 mb-6">Crea tu primera sección para comenzar</p>
      <button 
        class="btn bg-blue-600 hover:bg-blue-700 text-white"
        (click)="openCreateSeccionModal()">
        Crear Primera Sección
      </button>
    </div>
  }

  <!-- Content -->
  @if (!isLoading() && secciones().length > 0 && currentSeccion()) {
    <div>
      <!-- Tabs de Secciones -->
      <app-seccion-tabs 
        [secciones]="secciones()"
        [currentIndex]="currentSeccionIndex()"
        (selectSeccion)="goToSeccion($event)"
        (previous)="previousSeccion()"
        (next)="nextSeccion()" />

      <!-- Stats Cards -->
      <app-seccion-stats 
        [totalEspacios]="totalEspacios()"
        [espaciosDisponibles]="espaciosDisponibles()"
        [espaciosOcupados]="espaciosOcupados()" />

      <!-- Action Buttons -->
      <div class="flex gap-3 mb-6">
        <button 
          class="btn bg-blue-600 hover:bg-blue-700 text-white"
          (click)="openCreateEspaciosModal()">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
            <path fill="currentColor" d="M11 13H5v-2h6V5h2v6h6v2h-6v6h-2z"/>
          </svg>
          Crear Espacios
        </button>
        <button 
          class="btn bg-slate-700 hover:bg-slate-800 text-white"
          (click)="deleteSeccion()">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
            <path fill="currentColor" d="M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zM17 6H7v13h10zM9 17h2V8H9zm4 0h2V8h-2zM7 6v13z"/>
          </svg>
          Eliminar Sección
        </button>
      </div>

      <!-- Tabla de Espacios -->
      <app-espacios-table 
        [letraSeccion]="currentSeccion()!.letraSeccion"
        [espacios]="currentSeccion()!.espacios || []"
        (toggleEstado)="toggleEstadoEspacio($event)"
        (deleteEspacio)="deleteEspacio($event)"
        (createEspacios)="openCreateEspaciosModal()" />
    </div>
  }

  <!-- Modal: Crear Sección -->
  <app-modal-crear-seccion 
    [isOpen]="showCreateSeccionModal()"
    (close)="closeCreateSeccionModal()"
    (submit)="createSeccion($event)" />

  <!-- Modal: Crear Múltiples Espacios -->
  @if (currentSeccion()) {
    <app-modal-crear-espacios 
      [isOpen]="showCreateEspaciosModal()"
      [letraSeccion]="currentSeccion()!.letraSeccion"
      (close)="closeCreateEspaciosModal()"
      (submit)="createMultipleEspacios($event)" />
  }
</section>
