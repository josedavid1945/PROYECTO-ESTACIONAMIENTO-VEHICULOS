<div
  [ngClass]="{'w-20': !isExpanded(), 'w-72': isExpanded()}"
  class="flex flex-col py-5 px-4 bg-gradient-to-b from-[#1e293b] to-[#0f172a] h-screen fixed top-0 left-0 transition-all duration-300 ease-in-out z-50 shadow-2xl"
>
  <!-- HEADER -->
  <div class="flex items-center justify-between mb-8 px-3">
    <div
      class="logo h-[40px] flex items-center gap-x-2 cursor-pointer min-w-0"
      (click)="toggleMenu()"
      role="button"
    >
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" class="flex-shrink-0 text-white">
        <path fill="currentColor" d="M11 11V2h2v9h9v2h-9v9h-2v-9H2v-2z" />
      </svg>
      @if (isExpanded()) {
        <span class="text-white text-xl font-bold truncate">Panel Admin</span>
      }
    </div>
  </div>

  <!-- CONTENIDO PRINCIPAL (SCROLLEABLE) -->
  <div class="flex flex-col flex-1 overflow-y-auto">
    <nav class="flex flex-col gap-y-1">
      <!-- INICIO -->
       <!-- Link para inicio -->
      <a routerLink="/admin"
         routerLinkActive="bg-blue-600 border-blue-500"
         [routerLinkActiveOptions]="{exact:true}"
        class="nav-item flex items-center gap-x-3 py-3 px-3 rounded-lg hover:bg-slate-700 cursor-pointer transition-all duration-200 group border border-transparent hover:border-slate-600"
      >
        <div class="w-5 h-5 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20"
            class="text-slate-400 group-hover:text-white">
            <path fill="currentColor" d="M3 12h4v9H3zm14-4h4v13h-4zm-7-6h4v19h-4z" />
          </svg>
        </div>
        @if (isExpanded()) {
          <span class="text-slate-300 text-base font-medium group-hover:text-white truncate">Inicio</span>
        }
      </a>

      <!-- BUSQUEDA -->
      <a routerLink="/admin/estacionamiento/busqueda"
         routerLinkActive="bg-blue-600 border-blue-500"
        class="nav-item flex items-center gap-x-3 py-3 px-3 rounded-lg hover:bg-slate-700 cursor-pointer transition-all duration-200 group border border-transparent hover:border-slate-600"
      >
        <div class="w-5 h-5 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
            class="text-slate-400 group-hover:text-white">
            <path fill="currentColor"
              d="M15.5 5a3.5 3.5 0 1 0 0 7a3.5 3.5 0 0 0 0-7M10 8.5a5.5 5.5 0 1 1 10.032 3.117l2.675 2.676l-1.414 1.414l-2.675-2.675A5.5 5.5 0 0 1 10 8.5M3 4h5v2H3zm0 7h5v2H3zm18 7v2H3v-2z" />
          </svg>
        </div>
        @if (isExpanded()) {
          <span class="text-slate-300 text-base font-medium group-hover:text-white truncate">Búsqueda avanzada</span>
        }
      </a>

      <!-- REGISTRO CLIENTES -->
      <a routerLink="/admin/estacionamiento/registro"
         routerLinkActive="bg-blue-600 border-blue-500"

        class="nav-item flex items-center gap-x-3 py-3 px-3 rounded-lg hover:bg-slate-700 cursor-pointer transition-all duration-200 group border border-transparent hover:border-slate-600"
      >
        <div class="w-5 h-5 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
            class="text-slate-400 group-hover:text-white">
            <path fill="currentColor"
              d="M19 22H5a3 3 0 0 1-3-3V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v12h4v4a3 3 0 0 1-3 3m-1-5v2a1 1 0 1 0 2 0v-2zM6 7v2h8V7zm0 4v2h8v-2zm0 4v2h5v-2z" />
          </svg>
        </div>
        @if (isExpanded()) {
          <span class="text-slate-300 text-base font-medium group-hover:text-white truncate">Registro de clientes</span>
        }
      </a>

      <!-- GESTIÓN ESPACIO -->
      <a routerLink="/admin/estacionamiento/vista-secciones"
      routerLinkActive="bg-blue-600 border-blue-500"
        class="nav-item flex items-center gap-x-3 py-3 px-3 rounded-lg hover:bg-slate-700 cursor-pointer transition-all duration-200 group border border-transparent hover:border-slate-600"
      >
        <div class="w-5 h-5 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
            class="text-slate-400 group-hover:text-white">
            <path fill="currentColor"
              d="M19 21H5v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-9l2.417-4.029A2 2 0 0 1 6.132 8h11.736a2 2 0 0 1 1.715.971L22 13v9a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1zM4.332 13h15.336l-1.8-3H6.132zM6.5 18a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3m11 0a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3M5.44 3.44L6.5 2.378l1.06 1.06a1.5 1.5 0 1 1-2.121 0m5.5 0L12 2.378l1.06 1.06a1.5 1.5 0 1 1-2.121 0m5.5 0l1.06-1.061l1.06 1.06a1.5 1.5 0 1 1-2.121 0" />
          </svg>
        </div>
        @if (isExpanded()) {
          <span class="text-slate-300 text-base font-medium group-hover:text-white truncate">Gestión de espacio</span>
        }
      </a>
    </nav>
    <!-- Herramientas -->
    <div class="border-t border-slate-700 p-1 mt-4">
      <a routerLink="/admin/estacionamiento/herramientas"
          routerLinkActive="bg-blue-600 border-blue-500"
        class="flex items-center gap-x-2 py-2 px-2 rounded-lg hover:bg-slate-700 cursor-pointer transition-all duration-200 group border border-transparent hover:border-slate-600"
      >
      <div class="w-5 h-5 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"
          class="text-slate-400 group-hover:text-white">
          <path fill="currentColor"
            d="M5.33 3.272a3.5 3.5 0 0 1 4.472 4.473L20.647 18.59l-2.122 2.122L7.68 9.867a3.5 3.5 0 0 1-4.472-4.474L5.444 7.63a1.5 1.5 0 0 0 2.121-2.121zm10.367 1.883l3.182-1.768l1.414 1.415l-1.768 3.182l-1.768.353l-2.12 2.121l-1.415-1.414l2.121-2.121zm-7.071 7.778l2.121 2.122l-4.95 4.95A1.5 1.5 0 0 1 3.58 17.99l.097-.107z" />
        </svg>
      </div>
        @if (isExpanded()) {
          <span class="text-slate-300 text-base font-medium group-hover:text-white truncate">Herramientas</span>
        }
      </a>
    </div>

    <!-- USER INFO & LOGOUT -->
    <div class="mt-auto border-t border-slate-700 pt-4">
      <!-- User Info -->
      @if (currentUser()) {
        <div class="flex items-center gap-3 px-3 py-2 mb-2">
          <div class="h-10 w-10 bg-gradient-to-br from-blue-500 to-cyan-400 rounded-full flex items-center justify-center text-white font-semibold text-sm flex-shrink-0">
            {{ getUserInitials() }}
          </div>
          @if (isExpanded()) {
            <div class="min-w-0">
              <p class="text-white font-medium text-sm truncate">{{ fullName() }}</p>
              <p class="text-slate-400 text-xs truncate">{{ getRoleDisplay() }}</p>
            </div>
          }
        </div>
      }

      <!-- Logout Button -->
      <button 
        (click)="logout()"
        class="w-full flex items-center gap-x-3 py-3 px-3 rounded-lg hover:bg-red-600/20 cursor-pointer transition-all duration-200 group border border-transparent hover:border-red-500/30"
      >
        <div class="w-5 h-5 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
            class="text-red-400 group-hover:text-red-300">
            <path fill="currentColor" d="M5 22a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v3h-2V4H6v16h12v-2h2v3a1 1 0 0 1-1 1zm13-6v-3h-7v-2h7V8l5 4z"/>
          </svg>
        </div>
        @if (isExpanded()) {
          <span class="text-red-400 text-base font-medium group-hover:text-red-300 truncate">Cerrar sesión</span>
        }
      </button>
    </div>
  </div>
</div>
