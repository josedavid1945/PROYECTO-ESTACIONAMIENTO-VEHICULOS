<div class="bg-white rounded-lg shadow-lg p-8">
  <!-- Sección 1: Datos del Cliente -->
  <div class="mb-8">
    <h2 class="text-2xl font-semibold text-slate-800 mb-4 flex items-center">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" class="text-blue-600 mr-2">
        <path fill="currentColor" d="M12 4a4 4 0 0 1 4 4a4 4 0 0 1-4 4a4 4 0 0 1-4-4a4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/>
      </svg>
      Datos del Cliente
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div class="form-control">
        <label class="label">
          <span class="label-text text-slate-700 font-semibold text-base">Nombre Completo <span class="text-red-500">*</span></span>
        </label>
        <input type="text" [(ngModel)]="formData().nombreCliente" class="input input-bordered bg-white border-slate-300 text-slate-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-200" placeholder="Ej: Juan Pérez"/>
      </div>
      <div class="form-control">
        <label class="label">
          <span class="label-text text-slate-700 font-semibold text-base">Correo Electrónico <span class="text-red-500">*</span></span>
        </label>
        <input type="email" [(ngModel)]="formData().emailCliente" class="input input-bordered bg-white border-slate-300 text-slate-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-200" placeholder="Ej: juan@email.com"/>
      </div>
      <div class="form-control md:col-span-2">
        <label class="label">
          <span class="label-text text-slate-700 font-semibold text-base">Teléfono <span class="text-red-500">*</span></span>
        </label>
        <input type="text" [(ngModel)]="formData().telefonoCliente" class="input input-bordered bg-white border-slate-300 text-slate-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-200" placeholder="Ej: 099123456"/>
      </div>
    </div>
  </div>

  <div class="divider"></div>

  <!-- Sección 2: Datos del Vehículo -->
  <div class="mb-8">
    <h2 class="text-2xl font-semibold text-slate-800 mb-4 flex items-center">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" class="text-blue-600 mr-2">
        <path fill="currentColor" d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-1h12v1a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-8l-2.08-5.99M6.5 16a1.5 1.5 0 0 1-1.5-1.5A1.5 1.5 0 0 1 6.5 13A1.5 1.5 0 0 1 8 14.5A1.5 1.5 0 0 1 6.5 16m11 0a1.5 1.5 0 0 1-1.5-1.5a1.5 1.5 0 0 1 1.5-1.5a1.5 1.5 0 0 1 1.5 1.5a1.5 1.5 0 0 1-1.5 1.5M5 11l1.5-4.5h11L19 11H5Z"/>
      </svg>
      Datos del Vehículo
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div class="form-control">
        <label class="label">
          <span class="label-text text-slate-700 font-semibold text-base">Placa <span class="text-red-500">*</span></span>
        </label>
        <input type="text" [(ngModel)]="formData().placa" class="input input-bordered bg-white border-slate-300 text-slate-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-200" placeholder="Ej: ABC-1234"/>
      </div>
      <div class="form-control">
        <label class="label">
          <span class="label-text text-slate-700 font-semibold text-base">Tipo de Vehículo <span class="text-red-500">*</span></span>
        </label>
        <select [(ngModel)]="formData().tipoVehiculoId" class="select select-bordered bg-white border-slate-300 text-slate-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-200">
          <option value="" disabled selected>Seleccione tipo</option>
          @for (tipo of tiposVehiculo(); track tipo.id) {
            <option [value]="tipo.id">{{ tipo.categoria }}</option>
          }
        </select>
      </div>
      <div class="form-control">
        <label class="label">
          <span class="label-text text-slate-700 font-semibold text-base">Marca <span class="text-red-500">*</span></span>
        </label>
        <input type="text" [(ngModel)]="formData().marca" class="input input-bordered bg-white border-slate-300 text-slate-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-200" placeholder="Ej: Toyota"/>
      </div>
      <div class="form-control">
        <label class="label">
          <span class="label-text text-slate-700 font-semibold text-base">Modelo <span class="text-red-500">*</span></span>
        </label>
        <input type="text" [(ngModel)]="formData().modelo" class="input input-bordered bg-white border-slate-300 text-slate-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-200" placeholder="Ej: Corolla 2020"/>
      </div>
    </div>
  </div>

  <div class="divider"></div>

  <!-- Sección 3: Asignación de Espacio -->
  <div class="mb-6">
    <h2 class="text-2xl font-semibold text-slate-800 mb-4 flex items-center">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" class="text-blue-600 mr-2">
        <path fill="currentColor" d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"/>
      </svg>
      Espacio de Estacionamiento
    </h2>
    @if (formData().espacioId) {
      <div class="alert alert-success">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path fill="currentColor" d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
        </svg>
        <span>Espacio seleccionado: <strong>{{ espacioSeleccionado()?.numero || formData().espacioId }}</strong></span>
      </div>
    } @else {
      <div class="alert alert-warning">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path fill="currentColor" d="M13 13h-2V7h2m0 10h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2z"/>
        </svg>
        <span>Debe seleccionar un espacio disponible</span>
      </div>
    }
    <button (click)="onAbrirModalEspacios()" class="btn bg-blue-600 hover:bg-blue-700 text-white mt-4">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
        <path fill="currentColor" d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"/>
      </svg>
      Seleccionar Espacio
    </button>
  </div>

  <!-- Botones de Acción -->
  <div class="flex justify-end gap-4 mt-8">
    <button (click)="onCancelar()" class="btn btn-outline">Cancelar</button>
    <button (click)="onRegistrar()" class="btn bg-blue-600 hover:bg-blue-700 text-white" [disabled]="isLoading()">
      @if (isLoading()) {
        <span class="loading loading-spinner"></span>
      }
      Registrar y Generar Ticket
    </button>
  </div>
</div>
